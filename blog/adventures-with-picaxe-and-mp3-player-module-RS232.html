<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">

    <title>
  Adventures with PICAXE and MDFLY MP3 Player Module RS232
</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Mostly tech, and ther related blatherings.">
    <meta name="author" content="Timothy John Watts">
    <link rel="stylesheet" href="/static/css/github.css">
    <link rel="stylesheet" href="/static/css/bootstrap.min.css">
    <link rel="stylesheet" href="/static/css/bootstrap-responsive.css">

    <style>
      body {
        padding-top: 60px; /* 60px to make the container go all the way to the bottom of the topbar */
      }
      .dark-grey {
        color: #4B4B4B;
      }
      footer {
        margin: 30px 0px;
        color: #AAA;
      }
      pre {
        margin: 20px;
      }
    </style>
    <!--[if lt IE 9]>
    <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    
    

    <script src="/static/js/highlight.min.js"> </script>
    <script>
      hljs.initHighlightingOnLoad();

      var _gaq = _gaq || [];
      _gaq.push(['_setAccount', 'UA-1049137-4']);
      _gaq.push(['_setDomainName', 'readevalprint.com']);
      _gaq.push(['_trackPageview']);

      var ga = document.createElement('script');
      ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0];
      s.parentNode.insertBefore(ga, s);
    </script>
  </head>
  <body class="container">
       <div class="span7 offset2">
        <header>
          
  
            <h1><a href='/'>read<span class="dark-grey">eval</span>print</a></h1>
            <p>Code: it pays the <strike>bills</strike> fun.</p>
          
  
  <time datetime="2012-08-23">Thur, Aug 23 2012</time>

  <h2>
    
  Adventures with PICAXE and MDFLY MP3 Player Module RS232

  </h2>


        </header>
        
  <p><span class="span3"><img alt="Me soldering the PICAXE dev board" src="/static/img/soldering-picaxe.jpg" /></span>
  <span class="span3"><img alt="SD Card MP3 Player Module RS232-TTL" src="/static/img/RS232.jpg" /></span>
  <br style="clear:both;"></p>
<p>I found that the <a href="http://www.mdfly.com/index.php?main_page=product_info&amp;cPath=9_53&amp;products_id=284">MDFLY RS232 MP3 module</a> need about 6v and the <a href="picaxe.com">PICAXE</a> needs less than 5.5v.
This lead to a bit of head scratching and hurruffing until I got the great idea
to use a 4 AA pack and solder an extra lead to the 3rd battery for the PICAXE for
3x1.5v = 4.5v and share the common ground wiht the mp3 module for the TTL communication.</p>
<p>Note that the songs are played based on their order in the FAT pointers, sooo
after much head banging it turns out that the order they are loaded on the SD card
and any other hidden files will affect the playback order. <a href="http://www.picaxeforum.co.uk/archive/index.php/t-16353.html">more info..</a></p>
<p>tl;dr download <a href="http://fatsort.sourceforge.net/">fatsort (*nix)</a> or <a href="http://www.anerty.net/software/file/DriveSort.php">drivesort (windows)</a>
and remove all hidden files before runing it.</p>
<p>I wish I had read this before. But now you can :)</p>
<p>Simplified code to play the only song 1:
<code class="no-highlight">
  <pre>
symbol PLAY_BTN = C.1</p>
<p>main:
  touch PLAY_BTN, b1
  if b1 &gt; 128 then
    goto play
  endif
  goto main</p>
<p>play:
  serout C.2, T4800, ($01)
  goto release</p>
<p>; wait untill released before accepting anymore commands
release:
  touch PLAY_BTN, b4
  if b4 &gt; 128 then
    goto release
  else
    goto main
  endif
  </pre>
</code></p>
<br style="clear:both;">

        


        <footer> ReadEvalPrint is a series of typos by
          <a href="https://twitter.com/readevalprint">@readevalprint</a>. Enjoy yourself, it's a celebration!
        </footer>
      </div>
    </body>
  </html>
